<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Project Detail Fix</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .info { background: #d1ecf1; border-color: #bee5eb; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Test Project Detail Fix</h1>
        <p>This tool will test if the ProjectDetail component can handle different project data structures without crashing.</p>
        
        <div class="test-section info">
            <h3>üß™ Test Cases</h3>
            <p>We'll test projects with different data structures:</p>
            <ul>
                <li>Project with photos array</li>
                <li>Project with only main image</li>
                <li>Project with empty photos array</li>
                <li>Project with missing photos field</li>
            </ul>
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <button onclick="testProjectStructures()">üöÄ Test All Project Structures</button>
            <button onclick="clearResults()">üóëÔ∏è Clear Results</button>
        </div>
        
        <div id="results"></div>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-section ${type}`;
            div.innerHTML = message;
            resultsDiv.appendChild(div);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        function testProjectStructures() {
            clearResults();
            addResult('üß™ Testing different project data structures...', 'info');
            
            const testProjects = [
                {
                    name: 'Project with photos array',
                    data: {
                        id: 'test1',
                        title: 'Test Project 1',
                        description: 'Project with multiple photos',
                        category: 'Test',
                        image: 'https://via.placeholder.com/400x300',
                        photos: [
                            'https://via.placeholder.com/800x600/ff0000',
                            'https://via.placeholder.com/800x600/00ff00',
                            'https://via.placeholder.com/800x600/0000ff'
                        ]
                    }
                },
                {
                    name: 'Project with only main image',
                    data: {
                        id: 'test2',
                        title: 'Test Project 2',
                        description: 'Project with only main image',
                        category: 'Test',
                        image: 'https://via.placeholder.com/400x300'
                    }
                },
                {
                    name: 'Project with empty photos array',
                    data: {
                        id: 'test3',
                        title: 'Test Project 3',
                        description: 'Project with empty photos array',
                        category: 'Test',
                        image: 'https://via.placeholder.com/400x300',
                        photos: []
                    }
                },
                {
                    name: 'Project with missing photos field',
                    data: {
                        id: 'test4',
                        title: 'Test Project 4',
                        description: 'Project with missing photos field',
                        category: 'Test',
                        image: 'https://via.placeholder.com/400x300'
                    }
                }
            ];

            testProjects.forEach((testCase, index) => {
                try {
                    // Simulate the ProjectDetail component logic
                    const project = testCase.data;
                    const normalizedProject = {
                        ...project,
                        photos: project.photos || [],
                        image: project.image || project.photos?.[0] || ''
                    };

                    // Test accessing photos[0] safely
                    const firstPhoto = normalizedProject.photos && normalizedProject.photos.length > 0 
                        ? normalizedProject.photos[0] 
                        : normalizedProject.image;

                    // Test navigation functions
                    const canNavigate = normalizedProject.photos && normalizedProject.photos.length > 1;
                    const currentIndex = 0;
                    const nextIndex = canNavigate ? (currentIndex === normalizedProject.photos.length - 1 ? 0 : currentIndex + 1) : currentIndex;
                    const prevIndex = canNavigate ? (currentIndex === 0 ? normalizedProject.photos.length - 1 : currentIndex - 1) : currentIndex;

                    addResult(`‚úÖ ${testCase.name}: PASSED<br>
                        - Photos array: ${normalizedProject.photos.length} items<br>
                        - First photo: ${firstPhoto ? 'Available' : 'Not available'}<br>
                        - Can navigate: ${canNavigate ? 'Yes' : 'No'}<br>
                        - Next index: ${nextIndex}, Prev index: ${prevIndex}`, 'success');

                } catch (error) {
                    addResult(`‚ùå ${testCase.name}: FAILED<br>
                        Error: ${error.message}`, 'error');
                }
            });

            addResult('üéâ All tests completed! The ProjectDetail component should now handle all these cases without crashing.', 'success');
        }

        // Auto-run tests on page load
        window.addEventListener('load', testProjectStructures);
    </script>
</body>
</html>
